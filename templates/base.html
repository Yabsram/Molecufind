<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="Kinase Schrodinger Stack the Future 2026">
    <meta name="keywords" content="hackathon schrodinger">
    <title>

      {% block title %}
        MolecuFind
      {% endblock title %}

    </title>
    <link rel="icon"
          href='{{ url_for("static", filename="favicon.svg") }}'
          sizes="any">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>

  <body>
    <header>
      <img src="{{ url_for('static', filename='favicon.svg') }}" alt="Our Logo" width="50" height="50">
      <h1>MolecuFind</h1>
    </header>

    <hr class="divider">

    {% block content %}
    {% endblock content %}
    
    <form method="post" action="{{ url_for('select_property') }}" class="select-form">

      <!-- AMW -->
      <div class="checkbox-group {% if selected.get('AMW') %}checked{% endif %}">
        <label>
          <input type="checkbox" name="amw" value="1" {% if selected.get('AMW') %}checked{% endif %}>
          Atomic Molecular Weight (AMW)
        </label>
        <div class="number-input">
          <input type="number" name="amw_value" placeholder="Enter a value" step="0.01" value="{{ selected.get('AMW', '') }}">
        </div>
      </div>

      <!-- Crippen logP -->
      <div class="checkbox-group {% if selected.get('Crippen logP') %}checked{% endif %}">
        <label>
          <input type="checkbox" name="clogp" value="2" {% if selected.get('Crippen logP') %}checked{% endif %}>
          Crippen logP
        </label>
        <div class="number-input">
          <input type="number" name="clogp_value" placeholder="Enter a value" step="0.01" value="{{ selected.get('Crippen logP', '') }}">
        </div>
      </div>

      <!-- TPSA -->
      <div class="checkbox-group {% if selected.get('TPSA') %}checked{% endif %}">
        <label>
          <input type="checkbox" name="tpsa" value="3" {% if selected.get('TPSA') %}checked{% endif %}>
          Topological Polar Surface Area (TPSA)
        </label>
        <div class="number-input">
          <input type="number" name="tpsa_value" placeholder="Enter a value" step="0.01" value="{{ selected.get('TPSA', '') }}">
        </div>
      </div>

      <!-- Number of Heavy Atoms -->
      <div class="checkbox-group {% if selected.get('Number of Heavy Atoms') %}checked{% endif %}">
        <label>
          <input type="checkbox" name="numHeavyAtoms" value="4" {% if selected.get('Number of Heavy Atoms') %}checked{% endif %}>
          Number of Heavy Atoms
        </label>
        <div class="number-input">
          <input type="number" name="numHeavyAtoms_value" placeholder="Enter a value" step="0.01" value="{{ selected.get('Number of Heavy Atoms', '') }}">
        </div>
      </div>

      <!-- Number of Aromatic Rings -->
      <div class="checkbox-group {% if selected.get('Number of Aromatic Rings') %}checked{% endif %}">
        <label>
          <input type="checkbox" name="numAromaticRings" value="5" {% if selected.get('Number of Aromatic Rings') %}checked{% endif %}>
          Number of Aromatic Rings
        </label>
        <div class="number-input">
          <input type="number" name="numaromaticrings_value" placeholder="Enter a value" step="0.01" value="{{ selected.get('Number of Aromatic Rings', '') }}">
        </div>
      </div>

      <button type="submit">Submit</button>
    </form>

  {% if selected %}    
    <hr class="divider">

    <section class="results">
      <h6 class="subheader">Property Information</h6>
      <ul>
        {% for key, value in selected.items() %}
          <li class="filter">{{ key }}: {{ value }}</li>
        {% endfor %}
      </ul>
    </section>

    <hr class="divider">

    <section class="molecule-cards">
      <h6 class="subheader">Top 30 Molecule Results</h6>
      <div class="card-grid">
        {% for i in range(30) %}
        <div class="card">
          <img src="{{ url_for('static', filename='favicon.svg') }}" alt="Molecule Image" width="150" height="150">
          <p>Molecule Name {{ i + 1 }}</p>
          <button type="button" class="info-btn" data-index="{{ i }}">More Info</button>
        </div>
        {% endfor %}
      </div>
    </section>
    {% endif %}

    <hr class="divider">

    <footer>
      <img src="{{ url_for('static', filename='favicon.svg') }}" alt="Our Logo" width="50" height="50">
      <p>Made by Kinase.</p>
    </footer>

    <script>
    document.querySelectorAll('.checkbox-group input[type="checkbox"]').forEach(function(checkbox) {
      checkbox.addEventListener('change', function() {
        const numberInput = this.closest('.checkbox-group').querySelector('.number-input');
        if (this.checked) {
          numberInput.style.display = 'block';
          numberInput.querySelector('input').focus();
        } else {
          numberInput.style.display = 'none';
        }
      });
    });
    </script>
  </body>
</html>
